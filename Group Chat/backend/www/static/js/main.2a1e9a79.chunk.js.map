{"version":3,"sources":["components/JoinRoom.jsx","components/Home.jsx","components/Chat.jsx","App.js","index.js"],"names":["JoinRoom","roomAvailable","enable","style","margin","type","className","disabled","Home","onUserChange","onRoomChange","useState","roomAvaibale","user","setUser","onSubmit","e","preventDefault","placeholder","value","onChange","target","id","map","item","i","width","to","pathname","params","testvalue","length","pointerEvents","onClick","socket","io","axios","require","Chat","history","room","messages","setMessages","message","setMessage","a","get","data","reverse","console","log","deleteMessages","delete","useEffect","fetchMessages","replace","emit","on","msg","m","fontSize","textAlign","marginRight","marginLeft","height","backgroundColor","borderRadius","marginTop","position","overflow","Message","index","sender","_id","handleDelete","_","x","splice","alert","padding","paddingLeft","marginBottom","color","right","top","App","setRoom","path","exact","render","props","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.2a1e9a79.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport default function JoinRoom({roomAvailable, enable}){\r\n    return (\r\n            <button style={{margin: \"10px 0 10px 0\"}}  type=\"button\" className=\"btn btn-primary\" disabled = {enable}>{roomAvailable}</button>\r\n    )\r\n}","import React, { useState } from \"react\";\r\nimport JoinRoom from \"./JoinRoom\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Home({\r\n  onUserChange = () => {},\r\n  onRoomChange = () => {},\r\n}) {\r\n  const [roomAvaibale, setRoomAvailable] = useState([\r\n    \"Room 1\",\r\n    \"Room 2\",\r\n    \"Room 3\",\r\n  ]);\r\n  const [user, setUser] = useState(\"\");\r\n  const [room, setRoom] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"container\" style={{ margin: \"100px 50px 0 50px\" }}>\r\n      <div className=\"row\">\r\n        <center>\r\n          <h1>Group Chat</h1>\r\n        </center>\r\n      </div>\r\n      <hr style={{ margin: \"20px 0 20px 0\" }} />\r\n      <div className=\"row\">\r\n        <div className=\"col border-end\">\r\n          <center>\r\n            <form\r\n              onSubmit={(e) => {\r\n                e.preventDefault();\r\n              }}\r\n            >\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">\r\n                  {user ? `USERNAME : ${user}` : \"username\"}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"username\"\r\n                  value={user}\r\n                  onChange={(e) => {\r\n                    setUser(e.target.value);\r\n                    onUserChange(e.target.value);\r\n                  }}\r\n                  className=\"form-control\"\r\n                  id=\"exampleInputEmail1\"\r\n                  aria-describedby=\"emailHelp\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </center>\r\n          {/* <button type=\"submit\" className=\"btn btn-primary\">Submit</button> */}\r\n        </div>\r\n\r\n        <div className=\"col\">\r\n          <center>\r\n            <p>Join Available Rooms</p>\r\n          </center>\r\n          {roomAvaibale.map((item, i) => {\r\n            return (\r\n              <div\r\n                key={i}\r\n                className=\"row\"\r\n                style={{ margin: \"auto\", width: \"50%\" }}\r\n              >\r\n                <Link\r\n                  to={{ pathname: \"/chat\" }}\r\n                  params={{ testvalue: \"hello\" }}\r\n                  style={user.length >= 3 ? null : { pointerEvents: \"none\" }}\r\n                  onClick={() => {\r\n                    onRoomChange(roomAvaibale[i]);\r\n                    // Join to a room\r\n                  }}\r\n                >\r\n                  <JoinRoom\r\n                    enable={user.length >= 3 ? false : true}\r\n                    roomAvailable={item}\r\n                  />\r\n                </Link>\r\n              </div>\r\n            );\r\n          })}\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { io } from \"socket.io-client\";\r\nconst socket = io(\"http://65.2.121.52:80\");\r\nconst axios = require(\"axios\");\r\n\r\nexport default function Chat({ history, user, room }) {\r\n  const [messages, setMessages] = useState([]); //{sender:\"\", message:\"\"}\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const limit = 30,\r\n    page = 0;\r\n\r\n  async function fetchMessages() {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `http://65.2.121.52/getMessages/${room}?limit=${limit}&page=${page}`\r\n      );\r\n      setMessages(data.reverse());\r\n    } catch (ex) {\r\n      console.log(ex);\r\n    }\r\n  }\r\n\r\n  async function deleteMessages(id) {\r\n    const { data } = await axios.delete(\r\n      `http://65.2.121.52/deleteMessages/${id}?user=${user}`\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    //   Fetch prev messages from database\r\n    fetchMessages();\r\n    if (!user || !room) return history.replace(\"/\");\r\n\r\n    // join the room\r\n    socket.emit(\"join-room\", { room, user });\r\n\r\n    //   Listener for \"message\" events\r\n    socket.on(\"message\", (msg) => {\r\n      console.log(msg);\r\n      setMessages((m) => {\r\n        return [...m, msg];\r\n      });\r\n    });\r\n  }, [room, user]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!message) return alert(\"Message Should not be empty\");\r\n    socket.emit(\"message\", { message, sender: user, room });\r\n    setMessage(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <h1 style={{ fontSize: 20, textAlign: \"right\", marginRight: 40 }}>\r\n        username : {user}\r\n      </h1>\r\n      <h1 style={{ fontSize: 20, textAlign: \"right\", marginRight: 40 }}>\r\n        room : {room}\r\n      </h1>\r\n      <div className=\"\" style={{ marginLeft: \"auto\" }}>\r\n        <button\r\n          style={{}}\r\n          className=\"btn btn-primary\"\r\n          onClick={() => {\r\n            history.replace(\"/\");\r\n          }}\r\n        >\r\n          Exit room\r\n        </button>\r\n      </div>\r\n      <div\r\n        style={{\r\n          width: \"60%\",\r\n          height: \"80vh\",\r\n          backgroundColor: \"#E7E7E7\",\r\n          margin: \"auto\",\r\n          borderRadius: 10,\r\n          marginTop: 30,\r\n          position: \"relative\",\r\n          overflow: \"scroll\",\r\n        }}\r\n      >\r\n        {/* Reciever Messages */}\r\n        {messages.map((m, i) => (\r\n          <Message\r\n            key={i}\r\n            index={i}\r\n            user={user}\r\n            sender={m.sender}\r\n            message={m.message}\r\n            id={m._id}\r\n            deleteMessages={deleteMessages}\r\n            handleDelete={() => {\r\n              setMessages((_) => {\r\n                const x = [..._];\r\n                x.splice(i, 1);\r\n                return x;\r\n              });\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n      {/* Input Elem */}\r\n      <div style={{ margin: \"auto\", marginTop: 20 }}>\r\n        <form onSubmit={handleSubmit} style={{ width: \"auto\" }}>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            style={{ width: \"60%\", margin: \"auto\" }}\r\n            placeholder=\"Press Enter to Send Message\"\r\n            aria-label=\"Send Message\"\r\n            aria-describedby=\"basic-addon2\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n          />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Message({\r\n  sender,\r\n  message,\r\n  user,\r\n  index,\r\n  id,\r\n  deleteMessages,\r\n  handleDelete,\r\n}) {\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"20 30 20 30\",\r\n        backgroundColor: \"#444\",\r\n        paddingLeft: 10,\r\n        marginBottom: 1,\r\n        width: \"60%\",\r\n        marginLeft: sender == user ? \"auto\" : null,\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <p style={{ margin: 0, color: \"#E7E7E7\" }}>{sender} : </p>\r\n      <p style={{ color: \"#E7E7E7\" }}>Message : {message} </p>\r\n      {sender == user && (\r\n        <span style={{ position: \"absolute\", right: 5, top: 5 }}>\r\n          <button\r\n            className=\"btn btn-secondary\"\r\n            onClick={() => {\r\n              deleteMessages(id);\r\n              handleDelete();\r\n            }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport Home from \"./components/Home\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Chat from \"./components/Chat.jsx\";\n\nfunction App() {\n  const [user, setUser] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n\n  return (\n    <Router>\n      <Switch>\n        <Route\n          path=\"/\"\n          exact\n          render={(props) => (\n            <Home onRoomChange={setRoom} onUserChange={setUser} {...props} />\n          )}\n        />\n        <Route\n          path=\"/chat\"\n          render={(props) => <Chat user={user} room={room} {...props} />}\n        />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}