{"version":3,"sources":["components/Chat.jsx","components/JoinRoom.jsx","components/Home.jsx","App.js","index.js"],"names":["socket","io","axios","require","Chat","history","user","room","useState","messages","setMessages","message","setMessage","a","get","data","reverse","console","log","deleteMessages","id","delete","useEffect","fetchMessages","replace","emit","on","msg","m","className","style","fontSize","textAlign","marginRight","marginLeft","onClick","width","height","backgroundColor","margin","borderRadius","marginTop","position","overflow","map","i","Message","index","sender","_id","handleDelete","_","x","splice","onSubmit","e","preventDefault","alert","type","placeholder","value","onChange","target","padding","paddingLeft","marginBottom","color","right","top","JoinRoom","roomAvailable","enable","disabled","Home","onUserChange","onRoomChange","roomAvaibale","setUser","item","to","pathname","params","testvalue","length","pointerEvents","App","setRoom","path","exact","render","props","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.0c3695f1.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { io } from \"socket.io-client\";\r\nconst socket = io(\"http://65.2.121.52:80\");\r\nconst axios = require(\"axios\");\r\n\r\nexport default function Chat({ history, user, room }) {\r\n  const [messages, setMessages] = useState([]); //{sender:\"\", message:\"\"}\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const limit = 30,\r\n    page = 0;\r\n\r\n  async function fetchMessages() {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `http://65.2.121.52/getMessages/${room}?limit=${limit}&page=${page}`\r\n      );\r\n      setMessages(data.reverse());\r\n    } catch (ex) {\r\n      console.log(ex);\r\n    }\r\n  }\r\n\r\n  async function deleteMessages(id) {\r\n    const { data } = await axios.delete(\r\n      `http://65.2.121.52/deleteMessages/${id}?user=${user}`\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    //   Fetch prev messages from database\r\n    fetchMessages();\r\n    if (!user || !room) return history.replace(\"/\");\r\n\r\n    // join the room\r\n    socket.emit(\"join-room\", { room, user });\r\n\r\n    //   Listener for \"message\" events\r\n    socket.on(\"message\", (msg) => {\r\n      console.log(msg);\r\n      setMessages((m) => {\r\n        return [...m, msg];\r\n      });\r\n    });\r\n  }, [room, user]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!message) return alert(\"Message Should not be empty\");\r\n    socket.emit(\"message\", { message, sender: user, room });\r\n    setMessage(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <h1 style={{ fontSize: 20, textAlign: \"right\", marginRight: 40 }}>\r\n        username : {user}\r\n      </h1>\r\n      <h1 style={{ fontSize: 20, textAlign: \"right\", marginRight: 40 }}>\r\n        room : {room}\r\n      </h1>\r\n      <div className=\"\" style={{ marginLeft: \"auto\" }}>\r\n        <button\r\n          style={{}}\r\n          className=\"btn btn-primary\"\r\n          onClick={() => {\r\n            history.replace(\"/\");\r\n          }}\r\n        >\r\n          Exit room\r\n        </button>\r\n      </div>\r\n      <div\r\n        style={{\r\n          width: \"60%\",\r\n          height: \"80vh\",\r\n          backgroundColor: \"#E7E7E7\",\r\n          margin: \"auto\",\r\n          borderRadius: 10,\r\n          marginTop: 30,\r\n          position: \"relative\",\r\n          overflow: \"scroll\",\r\n        }}\r\n      >\r\n        {/* Reciever Messages */}\r\n        {messages.map((m, i) => (\r\n          <Message\r\n            key={i}\r\n            index={i}\r\n            user={user}\r\n            sender={m.sender}\r\n            message={m.message}\r\n            id={m._id}\r\n            deleteMessages={deleteMessages}\r\n            handleDelete={() => {\r\n              setMessages((_) => {\r\n                const x = [..._];\r\n                x.splice(i, 1);\r\n                return x;\r\n              });\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n      {/* Input Elem */}\r\n      <div style={{ margin: \"auto\", marginTop: 20 }}>\r\n        <form onSubmit={handleSubmit} style={{ width: \"auto\" }}>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            style={{ width: \"60%\", margin: \"auto\" }}\r\n            placeholder=\"Press Enter to Send Message\"\r\n            aria-label=\"Send Message\"\r\n            aria-describedby=\"basic-addon2\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n          />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Message({\r\n  sender,\r\n  message,\r\n  user,\r\n  index,\r\n  id,\r\n  deleteMessages,\r\n  handleDelete,\r\n}) {\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"20 30 20 30\",\r\n        backgroundColor: \"#444\",\r\n        paddingLeft: 10,\r\n        marginBottom: 1,\r\n        width: \"60%\",\r\n        marginLeft: sender == user ? \"auto\" : null,\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <p style={{ margin: 0, color: \"#E7E7E7\" }}>{sender} : </p>\r\n      <p style={{ color: \"#E7E7E7\" }}>Message : {message} </p>\r\n      {sender == user && (\r\n        <span style={{ position: \"absolute\", right: 5, top: 5 }}>\r\n          <button\r\n            className=\"btn btn-secondary\"\r\n            onClick={() => {\r\n              deleteMessages(id);\r\n              handleDelete();\r\n            }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function JoinRoom({roomAvailable, enable}){\r\n    return (\r\n            <button style={{margin: \"10px 0 10px 0\"}}  type=\"button\" className=\"btn btn-primary\" disabled = {enable}>{roomAvailable}</button>\r\n    )\r\n}","import React, { useState } from \"react\";\r\nimport JoinRoom from \"./JoinRoom\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Home({\r\n  onUserChange = () => {},\r\n  onRoomChange = () => {},\r\n}) {\r\n  const [roomAvaibale, setRoomAvailable] = useState([\r\n    \"Room 1\",\r\n    \"Room 2\",\r\n    \"Room 3\",\r\n  ]);\r\n  const [user, setUser] = useState(\"\");\r\n  const [room, setRoom] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"container\" style={{ margin: \"100px 50px 0 50px\" }}>\r\n      <div className=\"row\">\r\n        <center>\r\n          <h1>Group Chat</h1>\r\n        </center>\r\n      </div>\r\n      <hr style={{ margin: \"20px 0 20px 0\" }} />\r\n      <div className=\"row\">\r\n        <div className=\"col border-end\">\r\n          <center>\r\n            <form\r\n              onSubmit={(e) => {\r\n                e.preventDefault();\r\n              }}\r\n            >\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">\r\n                  {user ? `USERNAME : ${user}` : \"username\"}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"username\"\r\n                  value={user}\r\n                  onChange={(e) => {\r\n                    setUser(e.target.value);\r\n                    onUserChange(e.target.value);\r\n                  }}\r\n                  className=\"form-control\"\r\n                  id=\"exampleInputEmail1\"\r\n                  aria-describedby=\"emailHelp\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </center>\r\n          {/* <button type=\"submit\" className=\"btn btn-primary\">Submit</button> */}\r\n        </div>\r\n\r\n        <div className=\"col\">\r\n          <center>\r\n            <p>Join Available Rooms</p>\r\n          </center>\r\n          {roomAvaibale.map((item, i) => {\r\n            return (\r\n              <div\r\n                key={i}\r\n                className=\"row\"\r\n                style={{ margin: \"auto\", width: \"50%\" }}\r\n              >\r\n                <Link\r\n                  to={{ pathname: \"/chat\" }}\r\n                  params={{ testvalue: \"hello\" }}\r\n                  style={user.length >= 3 ? null : { pointerEvents: \"none\" }}\r\n                  onClick={() => {\r\n                    onRoomChange(roomAvaibale[i]);\r\n                    // Join to a room\r\n                  }}\r\n                >\r\n                  <JoinRoom\r\n                    enable={user.length >= 3 ? false : true}\r\n                    roomAvailable={item}\r\n                  />\r\n                </Link>\r\n              </div>\r\n            );\r\n          })}\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Chat from \"./components/Chat.jsx\";\nimport Home from \"./components/Home\";\n\nfunction App() {\n  const [user, setUser] = useState(\"\");\n  const [room, setRoom] = useState(\"\");\n\n  return (\n    <Router>\n      <Switch>\n        <Route\n          path=\"/\"\n          exact\n          render={(props) => (\n            <Home onRoomChange={setRoom} onUserChange={setUser} {...props} />\n          )}\n        />\n        <Route\n          path=\"/chat\"\n          render={(props) => <Chat user={user} room={room} {...props} />}\n        />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}