(this.webpackJsonpgroupchat=this.webpackJsonpgroupchat||[]).push([[0],{89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(49),c=n.n(r),s=n(38),o=n(20),i=n(1);function l(e){var t=e.roomAvailable,n=e.enable;return Object(i.jsx)("button",{style:{margin:"10px 0 10px 0"},type:"button",className:"btn btn-primary",disabled:n,children:t})}var u=n(31);function j(e){var t=e.onUserChange,n=void 0===t?function(){}:t,r=e.onRoomChange,c=void 0===r?function(){}:r,s=Object(a.useState)(["Room 1","Room 2","Room 3"]),j=Object(o.a)(s,2),b=j[0],d=(j[1],Object(a.useState)("")),h=Object(o.a)(d,2),m=h[0],p=h[1],O=Object(a.useState)(""),x=Object(o.a)(O,2);x[0],x[1];return Object(i.jsxs)("div",{className:"container",style:{margin:"100px 50px 0 50px"},children:[Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("center",{children:Object(i.jsx)("h1",{children:"Group Chat"})})}),Object(i.jsx)("hr",{style:{margin:"20px 0 20px 0"}}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col border-end",children:Object(i.jsx)("center",{children:Object(i.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{className:"form-label",children:m?"USERNAME : ".concat(m):"username"}),Object(i.jsx)("input",{type:"text",placeholder:"username",value:m,onChange:function(e){p(e.target.value),n(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]})})})}),Object(i.jsxs)("div",{className:"col",children:[Object(i.jsx)("center",{children:Object(i.jsx)("p",{children:"Join Available Rooms"})}),b.map((function(e,t){return Object(i.jsx)("div",{className:"row",style:{margin:"auto",width:"50%"},children:Object(i.jsx)(u.b,{to:{pathname:"/chat"},params:{testvalue:"hello"},style:m.length>=3?null:{pointerEvents:"none"},onClick:function(){c(b[t])},children:Object(i.jsx)(l,{enable:!(m.length>=3),roomAvailable:e})})},t)})),Object(i.jsx)("div",{})]})]})]})}var b=n(2),d=n(28),h=n.n(d),m=n(37),p=n(36),O=n(55),x=Object(O.a)("http://65.2.121.52:80"),g=n(70);function f(e){var t=e.history,n=e.user,r=e.room,c=Object(a.useState)([]),s=Object(o.a)(c,2),l=s[0],u=s[1],j=Object(a.useState)(""),b=Object(o.a)(j,2),d=b[0],O=b[1];function f(){return(f=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("http://65.2.121.52/getMessages/".concat(r,"?limit=").concat(30,"&page=").concat(0));case 3:t=e.sent,n=t.data,u(n.reverse()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(e){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("http://65.2.121.52/deleteMessages/".concat(t,"?user=").concat(n));case 2:a=e.sent,a.data;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(function(){f.apply(this,arguments)}(),!n||!r)return t.replace("/");x.emit("join-room",{room:r,user:n}),x.on("message",(function(e){console.log(e),u((function(t){return[].concat(Object(m.a)(t),[e])}))}))}),[r,n]),Object(i.jsxs)("div",{className:"",children:[Object(i.jsxs)("h1",{style:{fontSize:20,textAlign:"right",marginRight:40},children:["username : ",n]}),Object(i.jsxs)("h1",{style:{fontSize:20,textAlign:"right",marginRight:40},children:["room : ",r]}),Object(i.jsx)("div",{className:"",style:{marginLeft:"auto"},children:Object(i.jsx)("button",{style:{},className:"btn btn-primary",onClick:function(){t.replace("/")},children:"Exit room"})}),Object(i.jsx)("div",{style:{width:"60%",height:"80vh",backgroundColor:"#E7E7E7",margin:"auto",borderRadius:10,marginTop:30,position:"relative",overflow:"scroll"},children:l.map((function(e,t){return Object(i.jsx)(v,{index:t,user:n,sender:e.sender,message:e.message,id:e._id,deleteMessages:y,handleDelete:function(){u((function(e){var n=Object(m.a)(e);return n.splice(t,1),n}))}},t)}))}),Object(i.jsx)("div",{style:{margin:"auto",marginTop:20},children:Object(i.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),!d)return alert("Message Should not be empty");x.emit("message",{message:d,sender:n,room:r}),O("")},style:{width:"auto"},children:Object(i.jsx)("input",{type:"text",className:"form-control",style:{width:"60%",margin:"auto"},placeholder:"Press Enter to Send Message","aria-label":"Send Message","aria-describedby":"basic-addon2",value:d,onChange:function(e){return O(e.target.value)}})})})]})}function v(e){var t=e.sender,n=e.message,a=e.user,r=(e.index,e.id),c=e.deleteMessages,s=e.handleDelete;return Object(i.jsxs)("div",{style:{padding:"20 30 20 30",backgroundColor:"#444",paddingLeft:10,marginBottom:1,width:"60%",marginLeft:t==a?"auto":null,position:"relative"},children:[Object(i.jsxs)("p",{style:{margin:0,color:"#E7E7E7"},children:[t," : "]}),Object(i.jsxs)("p",{style:{color:"#E7E7E7"},children:["Message : ",n," "]}),t==a&&Object(i.jsx)("span",{style:{position:"absolute",right:5,top:5},children:Object(i.jsx)("button",{className:"btn btn-secondary",onClick:function(){c(r),s()},children:"Delete"})})]})}var y=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),d=l[0],h=l[1];return Object(i.jsx)(u.a,{children:Object(i.jsxs)(b.c,{children:[Object(i.jsx)(b.a,{path:"/",exact:!0,render:function(e){return Object(i.jsx)(j,Object(s.a)({onRoomChange:h,onUserChange:r},e))}}),Object(i.jsx)(b.a,{path:"/chat",render:function(e){return Object(i.jsx)(f,Object(s.a)({user:n,room:d},e))}})]})})};c.a.render(Object(i.jsx)(y,{}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.2a1e9a79.chunk.js.map