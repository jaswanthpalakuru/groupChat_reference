(this.webpackJsonpgroupchat=this.webpackJsonpgroupchat||[]).push([[0],{89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(49),c=n.n(r),s=n(38),o=n(20),i=n(32),l=n(2),u=n(28),j=n.n(u),b=n(37),d=n(35),h=n(55),m=n(1),p=Object(h.a)("http://65.2.121.52:80"),O=n(66);function x(e){var t=e.history,n=e.user,r=e.room,c=Object(a.useState)([]),s=Object(o.a)(c,2),i=s[0],l=s[1],u=Object(a.useState)(""),h=Object(o.a)(u,2),x=h[0],f=h[1];function v(){return(v=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("http://65.2.121.52/getMessages/".concat(r,"?limit=").concat(30,"&page=").concat(0));case 3:t=e.sent,n=t.data,l(n.reverse()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.delete("http://65.2.121.52/deleteMessages/".concat(t,"?user=").concat(n));case 2:a=e.sent,a.data;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(function(){v.apply(this,arguments)}(),!n||!r)return t.replace("/");p.emit("join-room",{room:r,user:n}),p.on("message",(function(e){console.log(e),l((function(t){return[].concat(Object(b.a)(t),[e])}))}))}),[r,n]),Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("h1",{style:{fontSize:20,textAlign:"right",marginRight:40},children:["username : ",n]}),Object(m.jsxs)("h1",{style:{fontSize:20,textAlign:"right",marginRight:40},children:["room : ",r]}),Object(m.jsx)("div",{className:"",style:{marginLeft:"auto"},children:Object(m.jsx)("button",{style:{},className:"btn btn-primary",onClick:function(){t.replace("/")},children:"Exit room"})}),Object(m.jsx)("div",{style:{width:"60%",height:"80vh",backgroundColor:"#E7E7E7",margin:"auto",borderRadius:10,marginTop:30,position:"relative",overflow:"scroll"},children:i.map((function(e,t){return Object(m.jsx)(g,{index:t,user:n,sender:e.sender,message:e.message,id:e._id,deleteMessages:y,handleDelete:function(){l((function(e){var n=Object(b.a)(e);return n.splice(t,1),n}))}},t)}))}),Object(m.jsx)("div",{style:{margin:"auto",marginTop:20},children:Object(m.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),!x)return alert("Message Should not be empty");p.emit("message",{message:x,sender:n,room:r}),f("")},style:{width:"auto"},children:Object(m.jsx)("input",{type:"text",className:"form-control",style:{width:"60%",margin:"auto"},placeholder:"Press Enter to Send Message","aria-label":"Send Message","aria-describedby":"basic-addon2",value:x,onChange:function(e){return f(e.target.value)}})})})]})}function g(e){var t=e.sender,n=e.message,a=e.user,r=(e.index,e.id),c=e.deleteMessages,s=e.handleDelete;return Object(m.jsxs)("div",{style:{padding:"20 30 20 30",backgroundColor:"#444",paddingLeft:10,marginBottom:1,width:"60%",marginLeft:t==a?"auto":null,position:"relative"},children:[Object(m.jsxs)("p",{style:{margin:0,color:"#E7E7E7"},children:[t," : "]}),Object(m.jsxs)("p",{style:{color:"#E7E7E7"},children:["Message : ",n," "]}),t==a&&Object(m.jsx)("span",{style:{position:"absolute",right:5,top:5},children:Object(m.jsx)("button",{className:"btn btn-secondary",onClick:function(){c(r),s()},children:"Delete"})})]})}function f(e){var t=e.roomAvailable,n=e.enable;return Object(m.jsx)("button",{style:{margin:"10px 0 10px 0"},type:"button",className:"btn btn-primary",disabled:n,children:t})}function v(e){var t=e.onUserChange,n=void 0===t?function(){}:t,r=e.onRoomChange,c=void 0===r?function(){}:r,s=Object(a.useState)(["Room 1","Room 2","Room 3"]),l=Object(o.a)(s,2),u=l[0],j=(l[1],Object(a.useState)("")),b=Object(o.a)(j,2),d=b[0],h=b[1],p=Object(a.useState)(""),O=Object(o.a)(p,2);O[0],O[1];return Object(m.jsxs)("div",{className:"container",style:{margin:"100px 50px 0 50px"},children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("center",{children:Object(m.jsx)("h1",{children:"Group Chat"})})}),Object(m.jsx)("hr",{style:{margin:"20px 0 20px 0"}}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col border-end",children:Object(m.jsx)("center",{children:Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{className:"form-label",children:d?"USERNAME : ".concat(d):"username"}),Object(m.jsx)("input",{type:"text",placeholder:"username",value:d,onChange:function(e){h(e.target.value),n(e.target.value)},className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]})})})}),Object(m.jsxs)("div",{className:"col",children:[Object(m.jsx)("center",{children:Object(m.jsx)("p",{children:"Join Available Rooms"})}),u.map((function(e,t){return Object(m.jsx)("div",{className:"row",style:{margin:"auto",width:"50%"},children:Object(m.jsx)(i.b,{to:{pathname:"/chat"},params:{testvalue:"hello"},style:d.length>=3?null:{pointerEvents:"none"},onClick:function(){c(u[t])},children:Object(m.jsx)(f,{enable:!(d.length>=3),roomAvailable:e})})},t)})),Object(m.jsx)("div",{})]})]})]})}var y=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),j=u[0],b=u[1];return Object(m.jsx)(i.a,{children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",exact:!0,render:function(e){return Object(m.jsx)(v,Object(s.a)({onRoomChange:b,onUserChange:r},e))}}),Object(m.jsx)(l.a,{path:"/chat",render:function(e){return Object(m.jsx)(x,Object(s.a)({user:n,room:j},e))}})]})})};c.a.render(Object(m.jsx)(y,{}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.0c3695f1.chunk.js.map